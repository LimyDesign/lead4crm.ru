{% if isAMOUser %}
{% spaceless %}
<!DOCTYPE html>
<html>
<head>
    {% include 'layout/amo-header.twig' %}
    <link rel="stylesheet" href="/public/css/bootstrap-select.min.css">
    <style>
        .tab-pane {
            padding-top: 10px;
        }
    </style>
</head>
<body>
<h3>Поиск и импорт компаний из справочника 2ГИС</h3>
<ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active"><a href="#textsearch" aria-controls="textsearch" role="tab" data-toggle="tab">Текстовый ассоциативный поиск</a></li>
    <li role="presentation"><a href="#rubricsearch" aria-controls="rubricsearch" role="tab" data-toggle="tab">Поиск по видам деятельности</a></li>
    <li role="presentation"><a href="#result" aria-controls="result" role="tab" data-toggle="tab">Результаты поиска</a></li>
</ul>

<div class="tab-content">
    <div role="tabpanel" class="tab-pane fade in active" id="textsearch">
        <div class="container">
            <div class="row">
                <form id="formTextSearch">
                    <div class="form-group">
                        <label for="inputTextSearch">Поиск:</label>
                        <input type="text" class="form-control" id="inputTextSearch" placeholder="новостройки">
                        <p class="help-block">Данный тип поиска позволяет находить компании по любым критериям поиска, можно искать что угодно, результат скорее всего будет положительным.</p>
                    </div>
                    <div class="form-group">
                        <label for="inputCitySearch">Город:</label>
                        <select name="selectSearchCity" class="selectpicker" id="inputCitySearch" data-live-search="true" data-width="100%" data-style="btn-default input" title="[ выберите город ]">
                            {% for country in countries %}
                                <optgroup label="{{ country.name }}">
                                    {% for city in country.cities %}
                                        {% if city.selected %}
                                            <option value="{{ city.code }}" data-subtext="{{ city.children }}" selected>
                                                {{ city.name }}
                                            </option>
                                        {% else %}
                                            <option value="{{ city.code }}" data-subtext="{{ city.children }}">
                                                {{ city.name }}
                                            </option>
                                        {% endif %}
                                    {% endfor %}
                                </optgroup>
                            {% endfor %}
                        </select>
                        <p class="help-block">Начните вводить город в котором собираетесь выполнять поиск компаний. Если данный город поддерживается нашей системой, то он появится в списке.</p>
                    </div>
                    <button type="submit" class="btn btn-primary">Найти</button>
                </form>
            </div>
        </div>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="rubricsearch">
        <div class="container">
            <div class="row">
                <form id="formRubricSearch">
                    <div class="form-group">
                        <label for="inputRubricSearch">Вид деятельности:</label>
                        <select name="selectRubrics" id="inputRubricSearch" class="form-control" data-live-search="true" data-width="100%" data-style="btn-default input" title="[ выберите вид деятельности ]"></select>
                        <p class="help-block">Выберите вид деятельности в котором собираетесь искать потенциальных клиентов. Этот рубрикатор даст более точную выборку компаний нежели ассоциативный текстовый поиск, в том случае, если вы не можете найти подходящий вид деятельности, то вы можете переключиться обратно в текстовый поиск и там ввести искомую комбинацию.</p>
                    </div>
                    <div class="form-group">
                        <label for="inputCitySearch">Город:</label>
                        <input type="text" class="form-control" id="inputCitySearch" data-provide="typeahead" autocomplete="off">
                        <p class="help-block">Начните вводить город в котором собираетесь выполнять поиск компаний. Если данный город поддерживается нашей системой, то он появится в списке.</p>
                    </div>
                    <button type="submit" class="btn btn-primary">Найти</button>
                </form>
            </div>
        </div>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="result">
        <table class="table table-striped table-bordered" id="resultTable">
            <thead>
            <tr>
                <th class="text-center"><input type="checkbox" name="selectAll" id="selectAllID" checked></th>
                <th>Название компании</th>
                <th>Адрес</th>
                <th>Филиалов</th>
                <th>Ответственный</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td colspan="5" class="info">Воспользуйтесь один из методов поиска, чтобы получить результат.</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
{% include 'layout/scripts.twig' %}
<script type="text/javascript" src="/public/js/bootstrap3-typeahead.min.js"></script>
<script type="text/javascript" src="/public/js/bootstrap-select.min.js"></script>
<script type="text/javascript" src="/public/js/amocrm.min.js?apikey={{ request.apikey }}&subdomain={{ request.subdomain }}" data-name="amocrm"></script>
</body>
</html>
{% endspaceless %}
{% endif %}